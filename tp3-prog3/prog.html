<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./prog.css" />
    <title>programacion3</title>
  </head>
  <body>
    <h1 class="title">Operaciones Matematicas</h1>
    <div class="container">
      <form id="formu">
        <div>
          <div>
            <label>Numero 1</label>
            <input type="number" id="form-inp1" autocomplete="off" required />
          </div>
          <div>
            <label>Numero 2</label>
            <input type="number" id="form-inp2" autocomplete="off" required />
          </div>
          <div>
            <label>Operacion</label>

            <select name="combo" id="form-select">
              <option value="1">Suma</option>
              <option value="2">Resta</option>
              <option value="3">Multiplicacion</option>
              <option value="4">Division</option>
            </select>
          </div>
          <div>
            <button id="form-btn">Enviar</button>
            <button id="form-btn-limpiar">Limpiar</button>
          </div>
          <div class="resultados">
            <h3>resultado:</h3>
            <h1 id="resultado"></h1>
          </div>
        </div>
        <div>
          <h3 class="historial">Historial</h3>
          <ul id="list" class="list"></ul>
        </div>
      </form>
    </div>

    <script>
      let n1 = document.getElementById( "form-inp1" );
      let n2 = document.getElementById( "form-inp2" );
      let slct = document.getElementById( "form-select" );
      let limpiar = document.getElementById( "form-btn-limpiar" );
      let res = document.getElementById( "resultado" );
      let lista = document.getElementById( "list" );

      limpiar.addEventListener( "click", ( e ) => {
        e.preventDefault();
        document.getElementById( "formu" ).reset();
        res.innerHTML = "";
      });
      document.getElementById( "formu" ).addEventListener( "submit", ( e ) => {
        e.preventDefault();
        let newLi = document.createElement( "li" );
        if ( slct.value == 1 ) {
          newLi.innerHTML = `${ n1.value } + ${ n2.value } = ${ parseInt( n1.value ) + parseInt( n2.value ) }`;
          res.innerHTML = "";
          res.innerHTML = `${ parseInt( n1.value ) + parseInt( n2.value ) }`;
        } 
        else if ( slct.value == 2 ) {
          newLi.innerHTML = `${ n1.value } - ${ n2.value } = ${ parseInt( n1.value ) - parseInt( n2.value ) }`;
          res.innerHTML = "";
          res.innerHTML = `${ parseInt( n1.value ) - parseInt( n2.value ) }`;
        }
        if ( slct.value == 3 ) {
          newLi.innerHTML = `${ n1.value } x ${ n2.value } = ${ parseInt( n1.value ) * parseInt( n2.value ) }`;
          res.innerHTML = "";
          res.innerHTML = `${ parseInt( n1.value ) * parseInt( n2.value ) }`;
        }
        if ( slct.value == 4 ) {
          if ( parseInt( n1.value ) < parseInt( n2.value ) ) {
            alert( "El divisor debe ser mayor que el dividendo" );
            n1.focus();
            return;
          } else if ( n2.value == 0 ) {
            alert( "El dividendo no puede ser 0" );
            n2.focus();
            return;
          } else {
            newLi.innerHTML = `${ n1.value } / ${ n2.value } = ${ parseInt( n1.value ) / parseInt( n2.value ) }`;
            res.innerHTML = "";
            res.innerHTML = `${ ( parseInt( n1.value ) / parseInt( n2.value ) ).toFixed( 2 ) }`;
          }
        }
        if ( lista.childNodes.length >= 11 ) {
          lista.removeChild( lista.firstChild );
        }
        lista.appendChild( newLi );
        n1.focus();
      });
    </script>
  </body>
</html>
